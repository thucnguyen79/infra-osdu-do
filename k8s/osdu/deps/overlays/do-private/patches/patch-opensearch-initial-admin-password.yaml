apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: osdu-opensearch
  namespace: osdu-data
spec:
  template:
    spec:
      containers:
        - name: opensearch
          env:
            - name: DISABLE_INSTALL_DEMO_CONFIG
              value: "true"
            # Security plugin ENABLED for HTTPS + Auth
            - name: DISABLE_SECURITY_PLUGIN
              value: "false"
            # Set admin password from secret
            - name: OPENSEARCH_INITIAL_ADMIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: osdu-opensearch-secret
                  key: OPENSEARCH_INITIAL_ADMIN_PASSWORD
