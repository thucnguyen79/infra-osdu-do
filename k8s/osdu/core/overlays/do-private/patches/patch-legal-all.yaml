# patch-legal-all.yaml
# Hợp nhất tất cả cấu hình cho Legal Core Plus
apiVersion: apps/v1
kind: Deployment
metadata:
  name: osdu-legal
spec:
  template:
    spec:
      containers:
        - name: legal
          env:
            # === PARTITION SERVICE ===
            - name: PARTITION_HOST
              value: "http://osdu-partition:8080"
            - name: PARTITION_API
              value: "http://osdu-partition:8080/api/partition/v1"
            
            # === ENTITLEMENTS SERVICE ===
            - name: ENTITLEMENTS_HOST
              value: "http://osdu-entitlements:8080"
            - name: ENTITLEMENTS_URL
              value: "http://osdu-entitlements:8080/api/entitlements/v2"
            - name: AUTHORIZE_API
              value: "http://osdu-entitlements:8080/api/entitlements/v2"
            
            # === OBJECT STORAGE (Ceph/MinIO) ===
            - name: OBM_MINIO_SECRET_KEY
              valueFrom:
                secretKeyRef:
                  name: rook-ceph-object-user-osdu-store-osdu-s3-user
                  key: SecretKey
            
            # === DATABASE ===
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: osdu-postgres-secret
                  key: POSTGRES_PASSWORD
            
            # === LOGGING ===
            - name: LOG_LEVEL
              value: "INFO"
